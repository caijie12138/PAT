//Create by Caijie.Senior student of BJTU
1025. åè½¬é“¾è¡¨ (12/25)è¿™é¢˜çœŸçš„æŒºéš¾çš„ åªå¯¹äº†ä¸€ä¸ªğŸ˜„

æ—¶é—´é™åˆ¶
300 ms
å†…å­˜é™åˆ¶
65536 kB
ä»£ç é•¿åº¦é™åˆ¶
8000 B
åˆ¤é¢˜ç¨‹åº
Standard
ä½œè€…
CHEN, Yue
ç»™å®šä¸€ä¸ªå¸¸æ•°Kä»¥åŠä¸€ä¸ªå•é“¾è¡¨Lï¼Œè¯·ç¼–å†™ç¨‹åºå°†Lä¸­æ¯Kä¸ªç»“ç‚¹åè½¬ã€‚ä¾‹å¦‚ï¼šç»™å®šLä¸º1â†’2â†’3â†’4â†’5â†’6ï¼ŒKä¸º3ï¼Œåˆ™è¾“å‡ºåº”è¯¥ä¸º3â†’2â†’1â†’6â†’5â†’4ï¼›å¦‚æœKä¸º4ï¼Œåˆ™è¾“å‡ºåº”è¯¥ä¸º4â†’3â†’2â†’1â†’5â†’6ï¼Œå³æœ€åä¸åˆ°Kä¸ªå…ƒç´ ä¸åè½¬ã€‚

è¾“å…¥æ ¼å¼ï¼š

æ¯ä¸ªè¾“å…¥åŒ…å«1ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç¬¬1è¡Œç»™å‡ºç¬¬1ä¸ªç»“ç‚¹çš„åœ°å€ã€ç»“ç‚¹æ€»ä¸ªæ•°æ­£æ•´æ•°N(<= 105)ã€ä»¥åŠæ­£æ•´æ•°K(<=N)ï¼Œå³è¦æ±‚åè½¬çš„å­é“¾ç»“ç‚¹çš„ä¸ªæ•°ã€‚ç»“ç‚¹çš„åœ°å€æ˜¯5ä½éè´Ÿæ•´æ•°ï¼ŒNULLåœ°å€ç”¨-1è¡¨ç¤ºã€‚

æ¥ä¸‹æ¥æœ‰Nè¡Œï¼Œæ¯è¡Œæ ¼å¼ä¸ºï¼š

Address Data Next

å…¶ä¸­Addressæ˜¯ç»“ç‚¹åœ°å€ï¼ŒDataæ˜¯è¯¥ç»“ç‚¹ä¿å­˜çš„æ•´æ•°æ•°æ®ï¼ŒNextæ˜¯ä¸‹ä¸€ç»“ç‚¹çš„åœ°å€ã€‚

è¾“å‡ºæ ¼å¼ï¼š

å¯¹æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œé¡ºåºè¾“å‡ºåè½¬åçš„é“¾è¡¨ï¼Œå…¶ä¸Šæ¯ä¸ªç»“ç‚¹å ä¸€è¡Œï¼Œæ ¼å¼ä¸è¾“å…¥ç›¸åŒã€‚

è¾“å…¥æ ·ä¾‹ï¼š
00100 6 4
00000 4 99999
00100 1 12309
68237 6 -1
33218 3 00000
99999 5 68237
12309 2 33218
è¾“å‡ºæ ·ä¾‹ï¼š
00000 4 33218
33218 3 12309
12309 2 00100
00100 1 99999
99999 5 68237
68237 6 -1


import java.util.*;
import java.lang.*;
import java.io.*;

class Node {
    public String address;
    public int data;
    public String next;

    public Node(String address, int data, String next) {
        this.address = address;
        this.data = data;
        this.next = next;
    }

}

public class Main {
    public static void tranverse(LinkedList<Node> linkedList, int num) {
        for (int i = 1; i <= linkedList.size() / num; i++) {
            for (int j = num * i - 1; j>=0; j--) {
                Node now = linkedList.get(j);
                if(j-1>=0)
                    System.out.println(now.address + " " + now.data + " " + linkedList.get(j-1).address);
                else
                    System.out.println(now.address + " " + now.data + " " + linkedList.get(j+1).address);
                linkedList.remove(now);
            }
        }
        for (int k = 0; k < linkedList.size(); k++)
            System.out.println(linkedList.get(k).address + " " + linkedList.get(k).data + " " + linkedList.get(k).next);
    }

    public static void main(String[] args) throws IOException {
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in));
        String line = bufferedReader.readLine();
        String[] message = line.split(" ");
        String firstadd = message[0];
        int count = Integer.parseInt(message[1]);
        int num = Integer.parseInt(message[2]);
        LinkedList<Node> list1 = new LinkedList<>();
        LinkedList<Node> list2 = new LinkedList<>();
        for (int i = 0; i < count; i++) {
            String obj = bufferedReader.readLine();
            String[] pro = obj.split(" ");
            list1.add(new Node(pro[0], Integer.parseInt(pro[1]), pro[2]));
        }
        Iterator<Node> iterator = list1.iterator();
        while (count > 0) {
            if (!iterator.hasNext())
                iterator = list1.iterator();
            Node now = iterator.next();
            if (list2.isEmpty() && now.address.equals(firstadd)) {
                list2.add(now);
                count--;
            } else if (!list2.isEmpty() && now.address.equals(list2.getLast().next)) {
                list2.add(now);
                count--;
            }
        }
        tranverse(list2, num);
    }
}
